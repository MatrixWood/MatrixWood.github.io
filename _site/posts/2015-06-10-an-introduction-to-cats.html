<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Noel Welsh: An Introduction to Cats</title>
        <link rel="stylesheet" href="../css/bootstrap.min.css" />
        <link rel="stylesheet" href="../css/noelwelsh.css" />
        <link rel="stylesheet" href="../css/tango.css" />
        <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    </head>
    <body>
        <header class="page-header">
            <nav class="nav justify-content-center">
                <strong><a class="nav-link active" href="../">Home</a></strong>
                <a class="nav-link" href="../writing.html">Writing</a>
                <a class="nav-link" href="../projects.html">Projects</a>
                <a class="nav-link" href="../about.html">About</a>
            </nav>
        </header>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col col-9">
                    <main role="main">
                        <article>
    <section class="header">
        <h1>An Introduction to Cats</h1>
        
            <p><small>June 10, 2015</small></p>
        
    </section>
    <section>
        <p>You wouldn’t think the Internet would need a an <a href="http://www.eetimes.com/document.asp?doc_id=1266579">introduction to cats</a>, but then this <a href="https://github.com/non/cats">Cats</a> is a Scala library, not a small furry bed-hogging mammal. Cats is the spiritual successor to Scalaz: a library of absolutely essential utilities you really want to be using in your Scala code. Compared to Scalaz, Cats is more modular and it is using some newer tools to make its code base easier to work with.</p>
<p>Cats is still a closer to being a kitten than the king of the alley, but it has definitely reached the stage where it is usable. In this article I’ll provide a basic introduction to getting started with Cats.</p>
<!--more-->
<h2 id="getting-cats">Getting Cats</h2>
<p>A <a href="https://oss.sonatype.org/content/repositories/snapshots/org/spire-math/">snapshot release</a> of Cats is now available on Sonatype. Cats, as I mentioned above, is highly modularised, so there are some dependencies you need for the full Cats experience:</p>
<ul>
<li><a href="https://github.com/non/algebra"><code>algebra</code></a>, which defines basic abstractions like <code>Monoid</code> and <code>Semigroup</code>;</li>
<li><code>cats-core</code>, which defines the basic abstractions in Cats;</li>
<li><code>algebra-std</code>, for implementations of the abstractions in <code>algebra</code> for types in the standard library; and</li>
<li><code>cats-std</code>, which has implementations of the abstractions in Cats for the standard library.</li>
</ul>
<p>That sounds like a lot of stuff, but you can just copy and paste the snippet below in your <code>build.sbt</code> to get going.</p>
<p><em>Also note: to run some of the examples below you will need to clone <code>cats</code> from Github and run <code>sbt publish-local</code>.</em> Cats is moving fast and the snapshot release lags behind the development head.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode scala"><code class="sourceCode scala"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">val</span> snapshots = <span class="st">&quot;Sonatype Snapshots&quot;</span>  at <span class="st">&quot;https://oss.sonatype.org/content/repositories/snapshots&quot;</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">val</span> algebraVersion = <span class="st">&quot;0.2.0-SNAPSHOT&quot;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">val</span> catsVersion    = <span class="st">&quot;0.1.0-SNAPSHOT&quot;</span></a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">val</span> algebra    = <span class="st">&quot;org.spire-math&quot;</span> %% <span class="st">&quot;algebra&quot;</span> % algebraVersion</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">val</span> algebraStd = <span class="st">&quot;org.spire-math&quot;</span> %% <span class="st">&quot;algebra-std&quot;</span> % algebraVersion</a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">val</span> cats       = <span class="st">&quot;org.spire-math&quot;</span> %% <span class="st">&quot;cats-core&quot;</span> % catsVersion</a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw">val</span> catsStd    = <span class="st">&quot;org.spire-math&quot;</span> %% <span class="st">&quot;cats-std&quot;</span> % catsVersion</a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12">scalaVersion := <span class="st">&quot;2.11.6&quot;</span></a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14">libraryDependencies ++=</a>
<a class="sourceLine" id="cb1-15" title="15">  Seq(</a>
<a class="sourceLine" id="cb1-16" title="16">    algebra, algebraStd,</a>
<a class="sourceLine" id="cb1-17" title="17">    cats, catsStd</a>
<a class="sourceLine" id="cb1-18" title="18">  )</a>
<a class="sourceLine" id="cb1-19" title="19"></a>
<a class="sourceLine" id="cb1-20" title="20">resolvers += snapshots</a></code></pre></div>
<h2 id="using-cats">Using Cats</h2>
<p>Cats has a fairly straightforward organisation.</p>
<p>In the package <code>cats</code> you will find the basic types. Cats reexports some of the types from <code>algebra</code>, which provides very basic facilities like <code>Order</code> and <code>Monoid</code>.</p>
<p>In <code>cats.data</code> there are data types that work with the abstractions defined in <code>cats</code>. These are the tools you are most likely to use in your day-to-day work.</p>
<p>The package <code>cats.std</code> holds type class instances for classes in the standard library, such as <code>Option</code>, <code>List</code>, and <code>Map</code>.</p>
<p>Finally, <code>cats.syntax</code> contains useful syntax (implicit classes) for working more easily with Cats.</p>
<h2 id="cats.data">Cats.Data</h2>
<p>The types in <code>cats.data</code> are probably the first place you’ll explore when you start using Cats. If you’ve used Scalaz before you will find analogues to many familiar abstractions. Here are some of the highlights.</p>
<h3 id="xor">Xor</h3>
<p><code>Xor[A, B]</code> is a right-biased <code>Either</code>. An instance of <code>Xor</code> is either a <code>Xor.Left[A]</code> or a <code>Xor.Right[B]</code>. Being right-biased means that the <code>Right</code> case is considered a success, and <code>Left</code> is considered failure. Unlike <code>Either</code>, <code>Xor</code> has <code>flatMap</code> and <code>map</code> methods. These methods do something if the actual instance is <code>Right</code>, in the same way that <code>flatMap</code> on <code>Option</code> only does something if the actual instance is a <code>Some</code>. This choice gives rise to the term “right-biased”.</p>
<p>To work better with type classes, the <code>Xor</code> companion object provides convenience constructors <code>left</code> and <code>right</code> that return results of type <code>Xor</code>. These are the preferred way to construct instances.</p>
<p>Here’s an example.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode scala"><code class="sourceCode scala"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">import</span> cats.<span class="fu">data</span>.<span class="fu">Xor</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">object</span> XorExample {</a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="co">// Get Xor.left and Xor.right into scope</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="kw">import</span> Xor.{left, right}</a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="co">// The type we will be working with</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="kw">type</span> Result[A] = String Xor A</a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="kw">val</span> l: Result[Int] = <span class="fu">left</span>(<span class="st">&quot;Failed&quot;</span>)</a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="kw">val</span> r: Result[Int] = <span class="fu">right</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb2-11" title="11"></a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="co">// Nothing happens when we map a left</span></a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="fu">println</span>(l <span class="fu">map</span> (x =&gt; x + <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb2-14" title="14">  <span class="co">// The right is transformed</span></a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="fu">println</span>(r <span class="fu">map</span> (x =&gt; x + <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb2-16" title="16">}</a></code></pre></div>
<p><code>Xor</code> is a great type to represent the results of some computation, using <code>Left</code> to hold an error message and <code>Right</code> to hold a successful result.</p>
<h3 id="validated">Validated</h3>
<p>The <code>Validated[E, A]</code> type is the equivalent of Scalaz’s <code>Validation</code>. Like <code>Xor</code> it has two cases, which are <code>Validated.Invalid[E]</code> and <code>Validated.Valid[A]</code>. <code>Validated</code> is not a monad, so it does not have a <code>flatMap</code> method. It is, however, an applicative functor, and its typical usage is to accumulate errors.</p>
<p>Whereas an <code>Xor</code> stops running as soon as it encounters a <code>Left</code>, when we combine <code>Validated</code> instances the error messages contained within any <code>Invalid</code> instances will be appended together in the final result.</p>
<p>Like <code>Xor</code>, <code>Validated</code> has convenience constructors defined on the companion object.</p>
<p>The standard way to combine <code>Validated</code> instances is using the <code>|@|</code> syntax. Here’s an example.</p>
<p>~~~ scalated, Xor} import cats.syntax.apply._ // For |@| syntax import cats.std.list._ // For semigroup (append) on List</p>
<p>object ValidatedExample { import Xor.{left, right} import Validated.{invalid, valid}</p>
<p>// We are going to compare the behaviour of Xor and Validated. First we // define some instances. Then we combine them using flatMap // (for-comprehension) or <code>|@|</code> as appropriate.</p>
<p>type Error = List[String] type XorR = Xor[Error, Int] type ValidatedR = Validated[Error, Int]</p>
<p>val x1: XorR = right(1) val x2: XorR = left(List(“Stops here”)) val x3: XorR = left(List(“This will be ignored”))</p>
<p>val v1: ValidatedR = valid(1) val v2: ValidatedR = invalid(List(“Accumulates this”)) val v3: ValidatedR = invalid(List(“And this”))</p>
<p>// Stops as soon as we encounter an error println( for { x &lt;- x1 y &lt;- x2 z &lt;- x3 } yield x + y + z )</p>
<p>// Accumulates all the errors println( (v1 |@| v2 |@| v3) map { _ + _ + _ } ) } ~~~</p>
<p><code>Validated</code> and <code>Xor</code> are the two most commonly used data types in <code>cats.data</code>. Let’s look at the other packages now.</p>
<h2 id="cats">Cats</h2>
<p>The base <code>cats</code> packages contains the fundamental types like <code>Monad</code> and <code>Applicative</code>. If you’re used to Scalaz there are a few differences here. Cats defines a <code>FlatMap</code> trait that <code>Monad</code> extends. Like Scalaz, <code>Applicative</code> extends <code>Apply</code>, and it is <code>Apply</code> that defines the <code>|@|</code> syntax we used when we looked at <code>Validated</code>.</p>
<h2 id="cats.syntax">Cats.Syntax</h2>
<p>Cats defines syntax is a separate package, as in Scalaz. The tools in this package enrich types with extra methods that makes working with Cats more convenient. We have already seen an example when we imported <code>cats.syntax.apply._</code> to get the <code>|@|</code> syntax. There are similar helpers for <code>monad</code>, <code>eq</code>, and other types. If you’re used to Scalaz you will note some surprising omissions, such as the lack of syntax for constructing <code>Xor</code> instances with <code>.left</code> and <code>.right</code>. This is one area where Cats shows its youth – these helpers are still under development.</p>
<h2 id="cats.std">Cats.Std</h2>
<p>In <code>cats.std</code> are the type class instances for the standard library. Import <code>cats.std.list._</code> to get the <code>Monad</code>, <code>Semigroup</code>, and other instances defined on <code>List</code>. Instances defined on the value types are in <code>cats.std.anyval._</code></p>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>This has been a very quick overview of Cats. There are other packages, like <code>cats.free</code>, that are also part of the project, and of course it is still changing rapidly. The best place to track the development of Cats is its very active <a href="https://gitter.im/non/cats">gitter Room</a>.</p>
<p>Cats also has an emphasis on accessibility that I found lacking from Scalaz. <a href="http://non.github.io/cats/">Basic documentation</a> is available, with more under development, and Cats also subscribes to the <a href="http://typelevel.org/conduct.html">Typelevel code of conduct</a> to ensure a welcoming environment for all.</p>
    </section>
</article>

                    </main>
                </div>
            </div>
        </div>

        <footer class="text-center">
            <small>
                Site generated by
                <a href="http://jaspervdj.be/hakyll">Hakyll</a>
            </small>
        </footer>
    </body>
</html>
